{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport async function getImages(query, currentPage) {\n    const BASE_URL = 'https://pixabay.com';\n    const END_POINT = '/api/';\n    const params = new URLSearchParams({\n        key: '44423384-360ba42c67bb4e928fcac247f',\n        q: query,\n        page: currentPage,\n        per_page: 15,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: 'true',\n    });\n\n    const url = `${BASE_URL}${END_POINT}?${params}`;\n\n    const res = await axios.get(url);\n    return res.data;\n}","function imageTemplate(image) {\n    let { webformatURL, largeImageURL, tags, likes, views, comments, downloads } = image;\n\n    return `\n            <li class=\"gallery-item\">\n              <a class=\"gallery-link\" href=\"${largeImageURL}\">\n                 <img\n                     class=\"gallery-image\"\n                     src=\"${webformatURL}\"\n                     data-source=\"${largeImageURL}\"\n                     alt=\"${tags}\"\n                   />\n              </a>\n              <div class=\"gallery-info\">\n                 <ul class=\"gallery-info-list\">\n                     <li>\n                         <h3 class=\"gallery-info-name\">Likes</h3>\n                         <p class=\"gallery-info-text\">${likes}</p>\n                     </li>\n                     <li>\n                         <h3 class=\"gallery-info-name\">Views</h3>\n                         <p class=\"gallery-info-text\">${views}</p>\n                     </li>\n                     <li>\n                         <h3 class=\"gallery-info-name\">Comments</h3>\n                         <p class=\"gallery-info-text\">${comments}</p>\n                     </li>\n                     <li>\n                         <h3 class=\"gallery-info-name\">Downloads</h3>\n                         <p class=\"gallery-info-text\">${downloads}</p>\n                     </li>\n                 </ul>\n             </div>\n         </li>`;\n}\n\nexport function imagesTemplate(images) {\n    return images.map(imageTemplate).join('');\n}","import { getImages } from \"./js/pixabay-api\";\nimport { imagesTemplate } from \"./js/render-functions\";\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst refs = {\n    formInput: document.querySelector('.search-images-form'),\n    gallery: document.querySelector('.gallery'),\n    loadImg: document.querySelector('.loader'),\n    btnLoadMore: document.querySelector('.load-more-btn'),\n};\n\nlet captionDisplay = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nlet query = '';\nlet currentPage = 1;\nlet maxPage = 1;\nconst perPage = 15;\n\nrefs.formInput.addEventListener('submit', async e => {\n    e.preventDefault();\n\n    while (refs.gallery.firstChild) {refs.gallery.removeChild(refs.gallery.firstChild)}\n\n    query = e.target.elements.input.value.trim();\n    if (!query) {\n        showError('Search field is empty');\n        return;\n    }\n    \n    currentPage = 1;\n    showLoader();\n    hideLoadBtn();\n    \n    try {\n        const data = await getImages(query, currentPage);\n        maxPage = Math.ceil(data.totalHits / perPage);\n\n        if (maxPage === 0) {\n            showError('Sorry, there are no images matching your search query. Please try again!');\n            hideLoader();\n            changeBtnStatus();\n            return;\n        }\n\n        const markup = imagesTemplate(data.hits);\n        refs.gallery.insertAdjacentHTML('beforeend', markup);\n\n        captionDisplay.refresh();\n    } catch (err) {\n        showError(err);\n    }\n\n    hideLoader();\n    changeBtnStatus();\n    refs.formInput.reset();\n});\n\nrefs.btnLoadMore.addEventListener('click', async () => {\n  currentPage++;\n  hideLoadBtn();\n  showLoader();\n\n  try {\n    const data = await getImages(query, currentPage);\n    const markup = imagesTemplate(data.hits);\n    refs.gallery.insertAdjacentHTML('beforeend', markup);\n    \n    skipOldElement();\n      \n    captionDisplay.refresh();\n  } catch (err) {\n      showError(err);\n  }\n\n  hideLoader();\n  changeBtnStatus();\n});\n\n\nfunction showError(message) {\n  iziToast.error({\n    position: 'topRight',\n    backgroundColor: 'red',\n    theme: 'dark',\n    title: 'Error',\n    titleColor: 'white',\n    message,\n    messageColor: 'white',\n    maxWidth: 400,\n  });\n}\n\nfunction showLoadBtn() {\n  refs.btnLoadMore.classList.remove('visually-hidden');\n}\nfunction hideLoadBtn() {\n  refs.btnLoadMore.classList.add('visually-hidden');\n}\n\nfunction changeBtnStatus() {\n  if (currentPage >= maxPage) {\n    hideLoadBtn();\n\n    if (maxPage) {\n        iziToast.info({\n          position: 'topRight',\n          message: \"We're sorry, but you've reached the end of search results.\",\n      });\n    }\n  } else {\n    showLoadBtn();\n  }\n}\n\nfunction showLoader() {\n  refs.loadImg.classList.remove('visually-hidden');\n}\nfunction hideLoader() {\n  refs.loadImg.classList.add('visually-hidden');\n}\n\nfunction skipOldElement() {\n  const galleryElem = refs.gallery.children[0];\n  const height = galleryElem.getBoundingClientRect().height;\n  \n  scrollBy({\n    top: height * 2,\n    behavior: 'smooth',\n  });\n}"],"names":["getImages","query","currentPage","BASE_URL","END_POINT","params","url","axios","imageTemplate","image","webformatURL","largeImageURL","tags","likes","views","comments","downloads","imagesTemplate","images","refs","captionDisplay","SimpleLightbox","maxPage","perPage","e","showError","showLoader","hideLoadBtn","data","hideLoader","changeBtnStatus","markup","err","skipOldElement","message","iziToast","showLoadBtn","height"],"mappings":"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"}